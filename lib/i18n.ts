
import { create } from 'zustand';

type Lang = 'cs' | 'en' | 'uk';

interface I18nStore {
  lang: Lang;
  setLang: (l: Lang) => void;
  t: (key: string) => string;
}

const translations: Record<Lang, Record<string, string>> = {
  cs: {
    'app.name': 'FHB maintein',
    'menu.dashboard': 'Přehled',
    'menu.locations': 'Lokality',
    'menu.suppliers': 'Dodavatelé',
    'menu.tech_config': 'Nastavení Technologií',
    'menu.assets': 'Technologie',
    'menu.requests': 'Požadavky',
    'menu.maintenance': 'Šablony Údržby',
    'menu.users': 'Uživatelé',
    'menu.emails': 'Emaily',
    'menu.calendar': 'Kalendář',
    'menu.settings': 'Nastavení',
    
    'common.add': 'Přidat',
    'common.edit': 'Upravit',
    'common.delete': 'Smazat',
    'common.save': 'Uložit',
    'common.cancel': 'Zrušit',
    'common.create': 'Vytvořit',
    'common.actions': 'Akce',
    'common.search': 'Hledat...',
    'common.date': 'Datum',
    'common.status': 'Stav',
    'common.back': 'Zpět',
    'common.yes': 'Ano',
    'common.no': 'Ne',
    'common.all': 'Vše',
    'common.filter': 'Filtr',
    'common.clear_filter': 'Vyčistit filtr',
    'common.selected': 'vybráno',
    'common.ok': 'OK',
    'common.warning': 'Upozornění',
    'common.confirmation': 'Potvrzení',
    'common.confirm': 'Potvrdit',
    'common.email': 'Email',
    'common.days': 'dní',
    'common.approve': 'Schválit',
    'common.reject': 'Zamítnout',
    'common.page': 'Strana',
    'common.per_page': 'na stránku',
    'common.showing': 'Zobrazuji',
    'common.of': 'z',
    'common.subject': 'Předmět',
    'common.recipient': 'Příjemce',
    'common.retry': 'Znovu odeslat',
    'common.send': 'Odeslat',

    'auth.login': 'Přihlásit se',
    'auth.password': 'Heslo',
    'auth.forgot_password': 'Zapomenuté heslo',
    'auth.send_link': 'Odeslat odkaz',
    'auth.link_sent_title': 'Odkaz odeslán',
    'auth.link_sent_msg': 'Kliknutím na odkaz níže simulujete reset hesla (v produkci by přišel emailem).',
    'auth.link_sent_success': 'Odkaz byl odeslán na váš email.',
    'auth.new_password': 'Nové heslo',
    'auth.confirm_password': 'Potvrzení hesla',
    'auth.passwords_do_not_match': 'Hesla se neshodují.',
    'auth.reset_password': 'Obnovit heslo',
    'auth.reset_success': 'Heslo bylo úspěšně změněno.',
    'auth.token_invalid': 'Neplatný nebo již použitý odkaz pro obnovu hesla.',
    'auth.back_to_login': 'Zpět na přihlášení',
    'auth.enter_email': 'Zadejte email a heslo.',
    'auth.demo_accounts': 'Demo účty (klikni pro vyplnění)',
    'auth.local_data': 'Lokální data (Mock)',
    'auth.invalid_email_format': 'Zadejte platný email (např. jmeno@firma.cz).',
    'auth.account_blocked': 'Tento uživatel má zablokovaný přístup.',
    'auth.invalid_credentials': 'Neplatné přihlašovací údaje.',
    'auth.user_not_found': 'Uživatel s tímto emailem neexistuje.',
    'auth.email_not_found': 'Email v systému neexistuje.',
    'auth.server_error': 'Chyba serveru.',
    'auth.connection_error': 'Nepodařilo se připojit k serveru.',
    'auth.send_error': 'Chyba při odesílání požadavku. Zkuste to prosím později.',
    'auth.reset_error': 'Chyba při obnově hesla.',
    'auth.timeout': 'Server neodpovídá (Timeout).',

    'msg.confirm_delete': 'Opravdu chcete smazat tento záznam?',
    'msg.cannot_delete_used': 'Záznam nelze smazat, protože je používán.',
    'msg.admin_full_access': 'Administrátor má automaticky přístup ke všem lokalitám a pracovištím a neomezený limit.',
    'msg.no_my_requests': 'Nemáte žádné aktivní požadavky.',
    'msg.cost_exceeds_limit': 'Cena přesahuje váš schvalovací limit. Požadavek byl označen jako neschválený.',
    'msg.must_be_approved': 'Požadavek musí být schválen před zahájením nebo dokončením prací.',
    'msg.waiting_for_approval': 'Čeká na schválení',
    'msg.approval_limit_warning': 'Váš limit',
    'msg.approval_limit_exceeded': 'Nemáte dostatečné oprávnění pro schválení této částky.',
    'msg.must_be_approved_short': 'Požadavek musí být schválen před vyřešením.',
    'msg.no_comments': 'Žádné komentáře',
    'msg.password_changed': 'Heslo bylo úspěšně změněno.',
    'msg.fields_required': 'Všechna pole jsou povinná.',
    'msg.passwords_mismatch': 'Nová hesla se neshodují.',
    'msg.password_short': 'Nové heslo musí mít alespoň 4 znaky.',
    'msg.password_change_failed': 'Nepodařilo se změnit heslo. Zkontrolujte původní heslo.',
    'msg.maintenance_self_assign_only': 'Jako údržbář můžete úkoly přebírat pouze na sebe.',
    'msg.req_will_be_in_progress': 'Požadavek bude označen jako "V řešení".',
    'msg.calendar_legend': '* Zobrazují se aktivní úkoly pro vybraného uživatele.',
    'msg.user_active': 'Uživatel je aktivní',
    'msg.user_blocked': 'Uživatel je blokován',

    'validation.required': 'Toto pole je povinné',
    'val.name_length': 'Název musí mít alespoň 2 znaky.',
    'val.street_req': 'Ulice je povinná.',
    'val.city_req': 'Město je povinné.',
    'val.zip_req': 'PSČ je povinné.',

    'form.name': 'Název',
    'form.title': 'Název',
    'form.serial_number': 'Výrobní číslo',
    'form.description': 'Popis',
    'form.street': 'Ulice',
    'form.street_and_number': 'Ulice a číslo popisné',
    'form.number': 'Číslo',
    'form.zip': 'PSČ',
    'form.city': 'Město',
    'form.country': 'Země',
    'form.email': 'Email',
    'form.phone': 'Telefon',
    'form.ic': 'IČ',
    'form.dic': 'DIČ',
    'form.position': 'Pozice',
    'form.role': 'Role',
    'form.install_date': 'Datum instalace',
    'form.weight': 'Hmotnost (kg)',
    'form.documentation': 'Dokumentace (odkaz)',
    'form.type': 'Typ',
    'form.state': 'Stav',
    'form.workplace': 'Pracoviště',
    'form.location': 'Lokalita',
    'form.supplier': 'Dodavatel',
    'form.user_name': 'Jméno',
    'form.blocked': 'Blokovat přístup',
    'form.permissions': 'Oprávnění a Limity',
    'form.photos': 'Fotodokumentace',
    'form.add_photo': 'Přidat fotku',
    'form.is_visible': 'Aktivní',
    'form.cancellation_reason': 'Důvod storna',
    'form.planned_resolution_date': 'Očekávané datum vyřešení',
    'form.responsible_person': 'Odpovědné osoby',
    'form.interval': 'Interval (dny)',
    'form.allowed_days': 'Povolené dny generování',
    'form.plan_hours': 'Plánované hodiny',
    'form.maintenance_type': 'Typ údržby',
    'form.final_report': 'Závěrečná zpráva',
    'form.add_note': 'Přidat poznámku',
    'form.real_date_from': 'Skutečné datum od',
    'form.real_date_to': 'Skutečné datum do',
    'form.estimated_cost': 'Odhadovaná cena (EUR)',
    'form.approval_limit': 'Limit schválení (EUR)',
    'form.is_approved': 'Schváleno',
    'form.select_location': '-- Vyberte lokalitu --',
    'form.select_workplace': '-- Vyberte pracoviště --',
    'form.select_tech': '-- Vyberte technologii --',
    'form.select_tech_first': '-- Nejdříve vyberte pracoviště --',
    'form.internal_solution': '-- Interní řešení --',
    'form.default_for_tech': '(Výchozí pro technologii)',
    'form.technology': 'Technologie',
    'form.priority': 'Priorita',
    'form.estimated_time': 'Očekávaná pracnost (min)',
    'form.solution': 'Řešení (Dodavatel)',
    'form.old_password': 'Staré heslo',
    'form.new_password': 'Nové heslo',
    'form.confirm_password': 'Potvrzení nového hesla',
    'form.assign_solver': 'Přiřadit řešitele',
    'form.resolution_date_required': 'Očekávané datum vyřešení (povinné) *',

    'day.0': 'Ne',
    'day.1': 'Po',
    'day.2': 'Út',
    'day.3': 'St',
    'day.4': 'Čt',
    'day.5': 'Pá',
    'day.6': 'So',

    'month.0': 'Leden',
    'month.1': 'Únor',
    'month.2': 'Březen',
    'month.3': 'Duben',
    'month.4': 'Květen',
    'month.5': 'Červen',
    'month.6': 'Červenec',
    'month.7': 'Srpen',
    'month.8': 'Září',
    'month.9': 'Říjen',
    'month.10': 'Listopad',
    'month.11': 'Prosinec',

    'headers.locations': 'Seznam Lokalít',
    'headers.new_location': 'Nová Lokalita',
    'headers.edit_location': 'Upravit Lokalitu',
    'headers.workplaces': 'Pracoviště',
    'headers.new_supplier': 'Nový Dodavatel',
    'headers.edit_supplier': 'Upravit Dodavatele',
    'headers.new_user': 'Nový Uživatel',
    'headers.new_tech_type': 'Nový Typ Technologie',
    'headers.new_tech_state': 'Nový Stav Technologie',
    'headers.contacts': 'Kontaktní osoby',
    'headers.tech_types': 'Typy Technologií',
    'headers.tech_states': 'Stavy Technologií',
    'headers.new_request': 'Nový Požadavek',
    'headers.new_maintenance': 'Nová šablona údržby',
    'headers.edit_maintenance': 'Upravit šablonu',
    'headers.request_detail': 'Detail požadavku',
    'headers.maintenance_detail': 'Detail šablony',
    'headers.maintenance_plan': 'Šablony údržby',
    'headers.history': 'Historie',
    'headers.my_history': 'Moje Historie',
    'headers.comments': 'Komentáře',
    'headers.notes': 'Poznámky',
    'headers.cancel_request': 'Storno požadavku',
    'headers.assign_request': 'Převzít požadavek',
    'headers.complete_maintenance': 'Dokončení údržby',
    'headers.change_approval': 'Změna schválení',
    'headers.emails': 'Správa Emailů',
    'headers.information': 'Informace',
    'headers.approval': 'Schvalování',
    'headers.change_history': 'Historie změn',
    'header.calendar': 'Kalendář pracnosti',

    'dashboard.requests_overview': 'Agenda Požadavků',
    'dashboard.my_unresolved': 'Moje nevyřešené',
    'dashboard.new_requests': 'Nové',
    'dashboard.to_solve': 'K řešení',
    'dashboard.to_approve': 'Ke schválení',
    'dashboard.active_maintenance': 'Aktivní šablony',
    'dashboard.total_assets': 'Celkem Technologií',
    'dashboard.upcoming_maintenance': 'Nadcházející údržba',
    'dashboard.urgent_requests': 'Urgentní požadavky',
    'dashboard.view_all': 'Zobrazit vše',

    'role.admin': 'Administrátor',
    'role.maintenance': 'Údržbář',
    'role.operator': 'Obsluha',
    
    'status.new': 'Nový',
    'status.assigned': 'V řešení',
    'status.solved': 'Vyřešeno',
    'status.cancelled': 'Stornováno',
    'status.planned': 'Aktivní',
    'status.in_progress': 'Aktivní',
    'status.done': 'Neaktivní',
    'status.sent': 'Odesláno',
    'status.pending': 'Čeká',
    'status.error': 'Chyba',
    'status.active': 'Aktivní',
    'status.blocked': 'Blokován',
    
    'prio.basic': 'Běžná',
    'prio.priority': 'Prioritní',
    'prio.urgent': 'Urgentní',

    'col.open_requests': 'Požadavky',
    'col.next_maintenance': 'Perioda',
    'col.approved': 'Schváleno',
    'col.technology': 'Technologie',
    'col.solver': 'Řešitel',
    'col.cost': 'Cena',
    'col.time': 'Pracnost',
    'col.supplier': 'Dodavatel',
    'col.created': 'Vytvořeno',
    'col.deadline': 'Termín',
    'col.effort': 'Pracnost',
    'col.role': 'Role',
    'col.generation': 'Generování',
    'col.work_load': 'Práce',
    'col.approval_limits': 'Limity schvalování',

    'action.created': 'Vytvořeno',
    'action.status_change': 'Změna stavu',
    'action.approved': 'Schváleno',
    'action.rejected': 'Zamítnuto',
    'action.edited': 'Upraveno',
    'action.comment': 'Komentář',
    'action.cancel': 'Storno',
    'action.solve': 'Vyřešit',
    'action.take_over': 'Převzít',
    'action.reassign': 'Přebrat',
    'action.remove_approval': 'Odebrat souhlas',
    'action.confirm_cancel': 'Stornovat',
    'action.change_password': 'Změnit heslo',
    'action.save_changes': 'Uložit změny',
    'action.assign': 'Převzít / Přiřadit',
    'action.remove_solver': 'Odebrat řešitele',
    'action.today': 'Dnes',

    'label.author': 'Autor',
    'label.source': 'Zdroj',
    'label.auto_maintenance': 'Automatická údržba',
    'label.self_assign': '(Vlastní přiřazení)',
    'label.view_for': 'Zobrazit pro',
    'label.internal_tasks': 'Interní úkoly',
    'label.external_tasks': 'Externí úkoly',
    'label.template_active': 'Šablona je aktivní',

    'placeholder.write_comment': 'Napsat komentář...',

    'modal.cancel_request_title': 'Storno požadavku',
    'modal.cancel_request_prompt': 'Uveďte důvod zrušení požadavku:',
    'modal.change_password': 'Změna hesla',
    'modal.assign_title_edit': 'Změnit řešitele / Termín',
    'modal.assign_title_new': 'Přiřazení / Plánování',
    'modal.retry_email_title': 'Potvrzení odeslání',
    'modal.retry_email_msg': 'Opravdu chcete znovu odeslat vybrané emaily?',

    'filter.visibility_all': 'Viditelnost: Vše',
    'filter.visibility_yes': 'Viditelnost: Ano',
    'filter.visibility_no': 'Viditelnost: Ne',
    'filter.only_mine': 'Jen moje',

    'option.choose': '-- Vyberte --',
    'option.select_location': '-- Vyberte lokalitu --',
    'option.select_wp': '-- Vyberte pracoviště --',
    'option.select_tech': '-- Vyberte technologii --',
    'option.select_wp_first': '-- Nejdříve vyberte pracoviště --',
    'option.internal_solution': '-- Interní řešení --',
    'option.unassigned': '-- Nepřiřazeno --',

    'tooltip.print_day': 'Tisk denního plánu',

    'settings.title': 'Administrátorské nastavení',
    'settings.online_translation': 'Online překlady',
    'settings.online_translation_desc': 'Automaticky překládat uživatelské vstupy pomocí externí služby.',
    'settings.mock_mode_warning': 'Běžíte v Mock/Demo režimu. Změny se neukládají na server. Přihlašte se reálným účtem pro produkční použití.',

    'pdf.title_worklist': 'FHB Maintain - List pracnosti',
    'pdf.title_tasklist': 'Seznam úkolů',
    'pdf.col_tech': 'Technologie',
    'pdf.col_solver': 'Řešitel',
    'pdf.col_deadline': 'Termín',
    'pdf.col_prio': 'Priorita',
    'pdf.col_time': 'Čas',
    'pdf.col_cost': 'Cena',
    'pdf.col_solution': 'Řešení',
    'pdf.ext_suppliers': 'EXTERNÍ DODAVATELÉ',
    'pdf.summary': 'Souhrn',
    'pdf.count': 'Počet',
    'pdf.total_time': 'Celkový čas',
    'pdf.total_cost': 'Celková cena',
    'pdf.internal_reqs': 'Interní požadavky',
    'pdf.ext_suppliers_row': 'Externí dodavatelé',
    'pdf.total': 'CELKEM',
  },
  en: {
    'app.name': 'FHB maintein',
    'menu.dashboard': 'Dashboard',
    'menu.locations': 'Locations',
    'menu.suppliers': 'Suppliers',
    'menu.tech_config': 'Tech Config',
    'menu.assets': 'Technologies',
    'menu.requests': 'Requests',
    'menu.maintenance': 'Maintenance Templates',
    'menu.users': 'Users',
    'menu.emails': 'Emails',
    'menu.calendar': 'Calendar',
    'menu.settings': 'Settings',
    
    'common.add': 'Add',
    'common.edit': 'Edit',
    'common.delete': 'Delete',
    'common.save': 'Save',
    'common.cancel': 'Cancel',
    'common.create': 'Create',
    'common.actions': 'Actions',
    'common.search': 'Search...',
    'common.date': 'Date',
    'common.status': 'Status',
    'common.back': 'Back',
    'common.yes': 'Yes',
    'common.no': 'No',
    'common.all': 'All',
    'common.filter': 'Filter',
    'common.clear_filter': 'Clear Filter',
    'common.selected': 'selected',
    'common.ok': 'OK',
    'common.warning': 'Warning',
    'common.confirmation': 'Confirmation',
    'common.confirm': 'Confirm',
    'common.email': 'Email',
    'common.days': 'days',
    'common.approve': 'Approve',
    'common.reject': 'Reject',
    'common.page': 'Page',
    'common.per_page': 'per page',
    'common.showing': 'Showing',
    'common.of': 'of',
    'common.subject': 'Subject',
    'common.recipient': 'Recipient',
    'common.retry': 'Retry Sending',
    'common.send': 'Send',

    'auth.login': 'Log In',
    'auth.password': 'Password',
    'auth.forgot_password': 'Forgot Password',
    'auth.send_link': 'Send Link',
    'auth.link_sent_title': 'Link Sent',
    'auth.link_sent_msg': 'Click the link below to simulate password reset (in production this would be emailed).',
    'auth.link_sent_success': 'Link was sent to your email.',
    'auth.new_password': 'New Password',
    'auth.confirm_password': 'Confirm Password',
    'auth.passwords_do_not_match': 'Passwords do not match.',
    'auth.reset_password': 'Reset Password',
    'auth.reset_success': 'Password changed successfully.',
    'auth.token_invalid': 'Invalid or expired password reset link.',
    'auth.back_to_login': 'Back to Login',
    'auth.enter_email': 'Enter email and password.',
    'auth.demo_accounts': 'Demo accounts (click to fill)',
    'auth.local_data': 'Local data (Mock)',
    'auth.invalid_email_format': 'Enter a valid email (e.g. name@company.com).',
    'auth.account_blocked': 'This account is blocked.',
    'auth.invalid_credentials': 'Invalid credentials.',
    'auth.user_not_found': 'User with this email does not exist.',
    'auth.email_not_found': 'Email does not exist in the system.',
    'auth.server_error': 'Server error.',
    'auth.connection_error': 'Connection failed.',
    'auth.send_error': 'Error sending request.',
    'auth.reset_error': 'Error resetting password.',
    'auth.timeout': 'Server timeout.',

    'msg.confirm_delete': 'Are you sure you want to delete this record?',
    'msg.cannot_delete_used': 'Cannot delete, record is in use.',
    'msg.admin_full_access': 'Administrator automatically has access to all locations and workplaces with unlimited limit.',
    'msg.no_my_requests': 'You have no active requests.',
    'msg.cost_exceeds_limit': 'Cost exceeds your approval limit. Request marked as not approved.',
    'msg.must_be_approved': 'Request must be approved before starting or completing work.',
    'msg.waiting_for_approval': 'Waiting for approval',
    'msg.approval_limit_warning': 'Your limit',
    'msg.approval_limit_exceeded': 'You do not have sufficient permission to approve this amount.',
    'msg.must_be_approved_short': 'Must be approved before resolving.',
    'msg.no_comments': 'No comments',
    'msg.password_changed': 'Password changed successfully.',
    'msg.fields_required': 'All fields are required.',
    'msg.passwords_mismatch': 'Passwords do not match.',
    'msg.password_short': 'New password must be at least 4 chars.',
    'msg.password_change_failed': 'Failed to change password. Check old password.',
    'msg.maintenance_self_assign_only': 'As maintenance, you can only assign tasks to yourself.',
    'msg.req_will_be_in_progress': 'Request will be marked as "In Progress".',
    'msg.calendar_legend': '* Showing active tasks for selected user.',
    'msg.user_active': 'User is active',
    'msg.user_blocked': 'User is blocked',

    'validation.required': 'This field is required',
    'val.name_length': 'Name must be at least 2 chars.',
    'val.street_req': 'Street is required.',
    'val.city_req': 'City is required.',
    'val.zip_req': 'ZIP is required.',

    'form.name': 'Name',
    'form.title': 'Title',
    'form.serial_number': 'Serial Number',
    'form.description': 'Description',
    'form.street': 'Street',
    'form.street_and_number': 'Street and Number',
    'form.number': 'Number',
    'form.zip': 'ZIP',
    'form.city': 'City',
    'form.country': 'Country',
    'form.email': 'Email',
    'form.phone': 'Phone',
    'form.ic': 'Reg. No.',
    'form.dic': 'VAT ID',
    'form.position': 'Position',
    'form.role': 'Role',
    'form.install_date': 'Install Date',
    'form.weight': 'Weight (kg)',
    'form.documentation': 'Documentation (Link)',
    'form.type': 'Type',
    'form.state': 'State',
    'form.workplace': 'Workplace',
    'form.location': 'Location',
    'form.supplier': 'Supplier',
    'form.user_name': 'Name',
    'form.blocked': 'Block Access',
    'form.permissions': 'Permissions & Limits',
    'form.photos': 'Photos',
    'form.add_photo': 'Add Photo',
    'form.is_visible': 'Active',
    'form.cancellation_reason': 'Cancellation Reason',
    'form.planned_resolution_date': 'Expected Resolution Date',
    'form.responsible_person': 'Responsible Persons',
    'form.interval': 'Interval (days)',
    'form.allowed_days': 'Allowed Generation Days',
    'form.plan_hours': 'Planned Hours',
    'form.maintenance_type': 'Maintenance Type',
    'form.final_report': 'Final Report',
    'form.add_note': 'Add Note',
    'form.real_date_from': 'Actual Date From',
    'form.real_date_to': 'Actual Date To',
    'form.estimated_cost': 'Estimated Cost (EUR)',
    'form.approval_limit': 'Approval Limit (EUR)',
    'form.is_approved': 'Approved',
    'form.select_location': '-- Select Location --',
    'form.select_workplace': '-- Select Workplace --',
    'form.select_tech': '-- Select Technology --',
    'form.select_tech_first': '-- Select Workplace First --',
    'form.internal_solution': '-- Internal Solution --',
    'form.default_for_tech': '(Default for technology)',
    'form.technology': 'Technology',
    'form.priority': 'Priority',
    'form.estimated_time': 'Estimated Time (min)',
    'form.solution': 'Solution (Supplier)',
    'form.old_password': 'Old Password',
    'form.new_password': 'New Password',
    'form.confirm_password': 'Confirm New Password',
    'form.assign_solver': 'Assign Solver',
    'form.resolution_date_required': 'Resolution Date (required) *',

    'day.0': 'Sun',
    'day.1': 'Mon',
    'day.2': 'Tue',
    'day.3': 'Wed',
    'day.4': 'Thu',
    'day.5': 'Fri',
    'day.6': 'Sat',

    'month.0': 'January',
    'month.1': 'February',
    'month.2': 'March',
    'month.3': 'April',
    'month.4': 'May',
    'month.5': 'June',
    'month.6': 'July',
    'month.7': 'August',
    'month.8': 'September',
    'month.9': 'October',
    'month.10': 'November',
    'month.11': 'December',

    'headers.locations': 'Locations List',
    'headers.new_location': 'New Location',
    'headers.edit_location': 'Edit Location',
    'headers.workplaces': 'Workplaces',
    'headers.new_supplier': 'New Supplier',
    'headers.edit_supplier': 'Edit Supplier',
    'headers.new_user': 'New User',
    'headers.new_tech_type': 'New Tech Type',
    'headers.new_tech_state': 'New Tech State',
    'headers.contacts': 'Contact Persons',
    'headers.tech_types': 'Tech Types',
    'headers.tech_states': 'Tech States',
    'headers.new_request': 'New Request',
    'headers.new_maintenance': 'New Maintenance Template',
    'headers.edit_maintenance': 'Edit Template',
    'headers.request_detail': 'Request Detail',
    'headers.maintenance_detail': 'Template Detail',
    'headers.maintenance_plan': 'Maintenance Templates',
    'headers.history': 'History',
    'headers.my_history': 'My History',
    'headers.comments': 'Comments',
    'headers.notes': 'Notes',
    'headers.cancel_request': 'Cancel Request',
    'headers.assign_request': 'Assign Request',
    'headers.complete_maintenance': 'Complete Maintenance',
    'headers.change_approval': 'Change Approval',
    'headers.emails': 'Email Management',
    'headers.information': 'Information',
    'headers.approval': 'Approval',
    'headers.change_history': 'Change History',
    'header.calendar': 'Workload Calendar',

    'dashboard.requests_overview': 'Requests Overview',
    'dashboard.my_unresolved': 'My Unresolved',
    'dashboard.new_requests': 'New',
    'dashboard.to_solve': 'To Solve',
    'dashboard.to_approve': 'To Approve',
    'dashboard.active_maintenance': 'Active Templates',
    'dashboard.total_assets': 'Total Assets',
    'dashboard.upcoming_maintenance': 'Upcoming',
    'dashboard.urgent_requests': 'Urgent Requests',
    'dashboard.view_all': 'View All',

    'role.admin': 'Administrator',
    'role.maintenance': 'Maintenance',
    'role.operator': 'Operator',
    
    'status.new': 'New',
    'status.assigned': 'In Progress',
    'status.solved': 'Solved',
    'status.cancelled': 'Cancelled',
    'status.planned': 'Active',
    'status.in_progress': 'Active',
    'status.done': 'Inactive',
    'status.sent': 'Sent',
    'status.pending': 'Pending',
    'status.error': 'Error',
    'status.active': 'Active',
    'status.blocked': 'Blocked',
    
    'prio.basic': 'Basic',
    'prio.priority': 'Priority',
    'prio.urgent': 'Urgent',

    'col.open_requests': 'Requests',
    'col.next_maintenance': 'Interval',
    'col.approved': 'Approved',
    'col.technology': 'Technology',
    'col.solver': 'Solver',
    'col.cost': 'Cost',
    'col.time': 'Time',
    'col.supplier': 'Supplier',
    'col.created': 'Created',
    'col.deadline': 'Deadline',
    'col.effort': 'Effort',
    'col.role': 'Role',
    'col.generation': 'Generation',
    'col.work_load': 'Work',
    'col.approval_limits': 'Approval Limits',

    'action.created': 'Created',
    'action.status_change': 'Status Change',
    'action.approved': 'Approved',
    'action.rejected': 'Rejected',
    'action.edited': 'Edited',
    'action.comment': 'Comment',
    'action.cancel': 'Cancel',
    'action.solve': 'Resolve',
    'action.take_over': 'Take Over',
    'action.reassign': 'Reassign',
    'action.remove_approval': 'Remove Approval',
    'action.confirm_cancel': 'Confirm Cancel',
    'action.change_password': 'Change Password',
    'action.save_changes': 'Save Changes',
    'action.assign': 'Assign / Take Over',
    'action.remove_solver': 'Remove Solver',
    'action.today': 'Today',

    'label.author': 'Author',
    'label.source': 'Source',
    'label.auto_maintenance': 'Automated Maintenance',
    'label.self_assign': '(Self Assign)',
    'label.view_for': 'View for',
    'label.internal_tasks': 'Internal Tasks',
    'label.external_tasks': 'External Tasks',
    'label.template_active': 'Template is active',

    'placeholder.write_comment': 'Write a comment...',

    'modal.cancel_request_title': 'Cancel Request',
    'modal.cancel_request_prompt': 'Please state the reason for cancellation:',
    'modal.change_password': 'Change Password',
    'modal.assign_title_edit': 'Change Solver / Deadline',
    'modal.assign_title_new': 'Assign / Plan',
    'modal.retry_email_title': 'Confirm Resend',
    'modal.retry_email_msg': 'Do you really want to resend selected emails?',

    'filter.visibility_all': 'Visibility: All',
    'filter.visibility_yes': 'Visibility: Yes',
    'filter.visibility_no': 'Visibility: No',
    'filter.only_mine': 'Only mine',

    'option.choose': '-- Choose --',
    'option.select_location': '-- Select Location --',
    'option.select_wp': '-- Select Workplace --',
    'option.select_tech': '-- Select Technology --',
    'option.select_wp_first': '-- Select Workplace First --',
    'option.internal_solution': '-- Internal Solution --',
    'option.unassigned': '-- Unassigned --',

    'tooltip.print_day': 'Print Daily Plan',

    'settings.title': 'Admin Settings',
    'settings.online_translation': 'Online Translation',
    'settings.online_translation_desc': 'Automatically translate user inputs using external service.',
    'settings.mock_mode_warning': 'Running in Mock/Demo mode. Changes are not saved to server. Login with real account for production use.',

    'pdf.title_worklist': 'FHB Maintain - Work List',
    'pdf.title_tasklist': 'Task List',
    'pdf.col_tech': 'Technology',
    'pdf.col_solver': 'Solver',
    'pdf.col_deadline': 'Deadline',
    'pdf.col_prio': 'Priority',
    'pdf.col_time': 'Time',
    'pdf.col_cost': 'Cost',
    'pdf.col_solution': 'Solution',
    'pdf.ext_suppliers': 'EXTERNAL SUPPLIERS',
    'pdf.summary': 'Summary',
    'pdf.count': 'Count',
    'pdf.total_time': 'Total Time',
    'pdf.total_cost': 'Total Cost',
    'pdf.internal_reqs': 'Internal Requests',
    'pdf.ext_suppliers_row': 'External Suppliers',
    'pdf.total': 'TOTAL',
  },
  uk: {
    'app.name': 'FHB maintein',
    'menu.dashboard': 'Огляд',
    'menu.locations': 'Локації',
    'menu.suppliers': 'Постачальники',
    'menu.tech_config': 'Налаштування Технологій',
    'menu.assets': 'Технології',
    'menu.requests': 'Запити',
    'menu.maintenance': 'Шаблони обслуговування',
    'menu.users': 'Користувачі',
    'menu.emails': 'Електронні листи',
    'menu.calendar': 'Календар',
    'menu.settings': 'Налаштування',
    
    'common.add': 'Додати',
    'common.edit': 'Редагувати',
    'common.delete': 'Видалити',
    'common.save': 'Зберегти',
    'common.cancel': 'Скасувати',
    'common.create': 'Створити',
    'common.actions': 'Дії',
    'common.search': 'Пошук...',
    'common.date': 'Дата',
    'common.status': 'Статус',
    'common.back': 'Назад',
    'common.yes': 'Так',
    'common.no': 'Ні',
    'common.all': 'Все',
    'common.filter': 'Фільтр',
    'common.clear_filter': 'Очистити фільтр',
    'common.selected': 'вибрано',
    'common.ok': 'OK',
    'common.warning': 'Увага',
    'common.confirmation': 'Підтвердження',
    'common.confirm': 'Підтвердити',
    'common.email': 'Email',
    'common.days': 'днів',
    'common.approve': 'Схвалити',
    'common.reject': 'Відхилити',
    'common.page': 'Сторінка',
    'common.per_page': 'на сторінці',
    'common.showing': 'Показано',
    'common.of': 'з',
    'common.subject': 'Тема',
    'common.recipient': 'Одержувач',
    'common.retry': 'Повторити відправку',
    'common.send': 'Надіслати',

    'auth.login': 'Увійти',
    'auth.password': 'Пароль',
    'auth.forgot_password': 'Забули пароль',
    'auth.send_link': 'Надіслати посилання',
    'auth.link_sent_title': 'Посилання надіслано',
    'auth.link_sent_msg': 'Натисніть посилання нижче, щоб симулювати скидання пароля (у продакшн це приходить на пошту).',
    'auth.link_sent_success': 'Посилання надіслано на вашу пошту.',
    'auth.new_password': 'Новий пароль',
    'auth.confirm_password': 'Підтвердження пароля',
    'auth.passwords_do_not_match': 'Паролі не співпадають.',
    'auth.reset_password': 'Скинути пароль',
    'auth.reset_success': 'Пароль успішно змінено.',
    'auth.token_invalid': 'Недійсне або прострочене посилання.',
    'auth.back_to_login': 'Повернутися до входу',
    'auth.enter_email': 'Введіть email та пароль.',
    'auth.demo_accounts': 'Демо-акаунти (натисніть, щоб заповнити)',
    'auth.local_data': 'Локальні дані (Mock)',
    'auth.invalid_email_format': 'Введіть дійсну електронну пошту.',
    'auth.account_blocked': 'Цей обліковий запис заблоковано.',
    'auth.invalid_credentials': 'Невірні дані для входу.',
    'auth.user_not_found': 'Користувача з таким email не існує.',
    'auth.email_not_found': 'Email не знайдено в системі.',
    'auth.server_error': 'Помилка сервера.',
    'auth.connection_error': 'Помилка з\'єднання.',
    'auth.send_error': 'Помилка при надсиланні запиту.',
    'auth.reset_error': 'Помилка скидання пароля.',
    'auth.timeout': 'Час очікування вичерпано.',

    'msg.confirm_delete': 'Ви впевнені, що хочете видалити цей запис?',
    'msg.cannot_delete_used': 'Неможливо видалити, запис використовується.',
    'msg.admin_full_access': 'Адміністратор автоматично має доступ до всіх локацій та робочих місць.',
    'msg.no_my_requests': 'У вас немає активних запитів.',
    'msg.cost_exceeds_limit': 'Вартість перевищує ваш ліміт схвалення. Запит позначено як не схвалений.',
    'msg.must_be_approved': 'Запит повинен бути схвалений перед початком або завершенням робіт.',
    'msg.waiting_for_approval': 'Очікує на схвалення',
    'msg.approval_limit_warning': 'Ваш ліміт',
    'msg.approval_limit_exceeded': 'У вас недостатньо прав для схвалення цієї суми.',
    'msg.must_be_approved_short': 'Необхідно схвалити перед вирішенням.',
    'msg.no_comments': 'Немає коментарів',
    'msg.password_changed': 'Пароль успішно змінено.',
    'msg.fields_required': "Всі поля обов'язкові.",
    'msg.passwords_mismatch': 'Паролі не співпадають.',
    'msg.password_short': 'Новий пароль повинен мати мінімум 4 символи.',
    'msg.password_change_failed': 'Не вдалося змінити пароль. Перевірте старий пароль.',
    'msg.maintenance_self_assign_only': 'Як технік, ви можете призначати завдання тільки собі.',
    'msg.req_will_be_in_progress': 'Запит буде позначено як "В роботі".',
    'msg.calendar_legend': '* Показані активні завдання для вибраного користувача.',
    'msg.user_active': 'Користувач активний',
    'msg.user_blocked': 'Користувач заблокований',

    'validation.required': "Це поле є обов'язковим",
    'val.name_length': "Ім'я повинно містити мінімум 2 символи.",
    'val.street_req': 'Вулиця є обов\'язковою.',
    'val.city_req': 'Місто є обов\'язковим.',
    'val.zip_req': 'Індекс є обов\'язковим.',

    'form.name': 'Назва',
    'form.title': 'Назва',
    'form.serial_number': 'Серійний номер',
    'form.description': 'Опис',
    'form.street': 'Вулиця',
    'form.street_and_number': 'Вулиця та номер',
    'form.number': 'Номер',
    'form.zip': 'Індекс',
    'form.city': 'Місто',
    'form.country': 'Країна',
    'form.email': 'Email',
    'form.phone': 'Телефон',
    'form.ic': 'ЄДРПОУ',
    'form.dic': 'ІПН',
    'form.position': 'Посада',
    'form.role': 'Роль',
    'form.install_date': 'Дата встановлення',
    'form.weight': 'Вага (кг)',
    'form.documentation': 'Документація (посилання)',
    'form.type': 'Тип',
    'form.state': 'Стан',
    'form.workplace': 'Робоче місце',
    'form.location': 'Локація',
    'form.supplier': 'Постачальник',
    'form.user_name': "Ім'я",
    'form.blocked': 'Заблокувати доступ',
    'form.permissions': 'Права доступу та Ліміти',
    'form.photos': 'Фотографії',
    'form.add_photo': 'Додати фото',
    'form.is_visible': 'Активний',
    'form.cancellation_reason': 'Причина скасування',
    'form.planned_resolution_date': 'Очікувана дата вирішення',
    'form.responsible_person': 'Відповідальні особи',
    'form.interval': 'Інтервал (днів)',
    'form.allowed_days': 'Дозволені дні генерації',
    'form.plan_hours': 'Планові години',
    'form.maintenance_type': 'Тип обслуговування',
    'form.final_report': 'Заключний звіт',
    'form.add_note': 'Додати примітку',
    'form.real_date_from': 'Фактична дата з',
    'form.real_date_to': 'Фактична дата по',
    'form.estimated_cost': 'Орієнтовна вартість (EUR)',
    'form.approval_limit': 'Ліміт схвалення (EUR)',
    'form.is_approved': 'Схвалено',
    'form.select_location': '-- Виберіть локацію --',
    'form.select_workplace': '-- Виберіть робоче місце --',
    'form.select_tech': '-- Виберіть технологію --',
    'form.select_tech_first': '-- Спочатку виберіть робоче місце --',
    'form.internal_solution': '-- Внутрішнє рішення --',
    'form.default_for_tech': '(За замовчуванням для технології)',
    'form.technology': 'Технологія',
    'form.priority': 'Пріоритет',
    'form.estimated_time': 'Орієнтовний час (хв)',
    'form.solution': 'Рішення (Постачальник)',
    'form.old_password': 'Старий пароль',
    'form.new_password': 'Новий пароль',
    'form.confirm_password': 'Підтвердження нового паролю',
    'form.assign_solver': 'Призначити виконавця',
    'form.resolution_date_required': 'Дата вирішення (обов\'язково) *',

    'day.0': 'Нд',
    'day.1': 'Пн',
    'day.2': 'Вт',
    'day.3': 'Ср',
    'day.4': 'Чт',
    'day.5': 'Пт',
    'day.6': 'Сб',

    'month.0': 'Січень',
    'month.1': 'Лютий',
    'month.2': 'Березень',
    'month.3': 'Квітень',
    'month.4': 'Травень',
    'month.5': 'Червень',
    'month.6': 'Липень',
    'month.7': 'Серпень',
    'month.8': 'Вересень',
    'month.9': 'Жовтень',
    'month.10': 'Листопад',
    'month.11': 'Грудень',

    'headers.locations': 'Список локацій',
    'headers.new_location': 'Нова локація',
    'headers.edit_location': 'Редагувати локацію',
    'headers.workplaces': 'Робочі місця',
    'headers.new_supplier': 'Новий постачальник',
    'headers.edit_supplier': 'Редагувати постачальника',
    'headers.new_user': 'Новий користувач',
    'headers.new_tech_type': 'Новий тип технології',
    'headers.new_tech_state': 'Новий стан технології',
    'headers.contacts': 'Контактні особи',
    'headers.tech_types': 'Типи технологій',
    'headers.tech_states': 'Стани технологій',
    'headers.new_request': 'Новий запит',
    'headers.new_maintenance': 'Новий шаблон обслуговування',
    'headers.edit_maintenance': 'Редагувати шаблон',
    'headers.request_detail': 'Деталі запиту',
    'headers.maintenance_detail': 'Деталі шаблону',
    'headers.maintenance_plan': 'Шаблони обслуговування',
    'headers.history': 'Історія',
    'headers.my_history': 'Моя історія',
    'headers.comments': 'Коментарі',
    'headers.notes': 'Примітки',
    'headers.cancel_request': 'Скасування запиту',
    'headers.assign_request': 'Прийняти запит',
    'headers.complete_maintenance': 'Завершення обслуговування',
    'headers.change_approval': 'Зміна схвалення',
    'headers.emails': 'Управління Email',
    'headers.information': 'Інформація',
    'headers.approval': 'Схвалення',
    'headers.change_history': 'Історія змін',
    'header.calendar': 'Календар завантаження',

    'dashboard.requests_overview': 'Запити',
    'dashboard.my_unresolved': 'Мої невирішені',
    'dashboard.new_requests': 'Нові',
    'dashboard.to_solve': 'В роботі',
    'dashboard.to_approve': 'На схвалення',
    'dashboard.active_maintenance': 'Активні шаблони',
    'dashboard.total_assets': 'Всього активів',
    'dashboard.upcoming_maintenance': 'Майбутнє',
    'dashboard.urgent_requests': 'Термінові запити',
    'dashboard.view_all': 'Показати всі',

    'role.admin': 'Адміністратор',
    'role.maintenance': 'Технік',
    'role.operator': 'Оператор',
    
    'status.new': 'Новий',
    'status.assigned': 'В роботі',
    'status.solved': 'Вирішено',
    'status.cancelled': 'Скасовано',
    'status.planned': 'Активний',
    'status.in_progress': 'Активний',
    'status.done': 'Неактивний',
    'status.sent': 'Надіслано',
    'status.pending': 'Очікує',
    'status.error': 'Помилка',
    'status.active': 'Активний',
    'status.blocked': 'Заблокований',
    
    'prio.basic': 'Звичайна',
    'prio.priority': 'Пріоритетна',
    'prio.urgent': 'Термінова',

    'col.open_requests': 'Запити',
    'col.next_maintenance': 'Інтервал',
    'col.approved': 'Схвалено',
    'col.technology': 'Технологія',
    'col.solver': 'Виконавець',
    'col.cost': 'Вартість',
    'col.time': 'Час',
    'col.supplier': 'Постачальник',
    'col.created': 'Створено',
    'col.deadline': 'Термін',
    'col.effort': 'Зусилля',
    'col.role': 'Роль',
    'col.generation': 'Генерація',
    'col.work_load': 'Робота',
    'col.approval_limits': 'Ліміти схвалення',

    'action.created': 'Створено',
    'action.status_change': 'Зміна статусу',
    'action.approved': 'Схвалено',
    'action.rejected': 'Відхилено',
    'action.edited': 'Відредаговано',
    'action.comment': 'Коментар',
    'action.cancel': 'Скасувати',
    'action.solve': 'Вирішити',
    'action.take_over': 'Прийняти',
    'action.reassign': 'Перепризначити',
    'action.remove_approval': 'Скасувати схвалення',
    'action.confirm_cancel': 'Скасувати запит',
    'action.change_password': 'Змінити пароль',
    'action.save_changes': 'Зберегти зміни',
    'action.assign': 'Призначити / Прийняти',
    'action.remove_solver': 'Видалити виконавця',
    'action.today': 'Сьогодні',

    'label.author': 'Автор',
    'label.source': 'Джерело',
    'label.auto_maintenance': 'Автоматичне обслуговування',
    'label.self_assign': '(Самопризначення)',
    'label.view_for': 'Перегляд для',
    'label.internal_tasks': 'Внутрішні завдання',
    'label.external_tasks': 'Зовнішні завдання',
    'label.template_active': 'Шаблон активний',

    'placeholder.write_comment': 'Написати коментар...',

    'modal.cancel_request_title': 'Скасування запиту',
    'modal.cancel_request_prompt': 'Вкажіть причину скасування запиту:',
    'modal.change_password': 'Зміна пароля',
    'modal.assign_title_edit': 'Змінити виконавця / Термін',
    'modal.assign_title_new': 'Призначення / Планування',
    'modal.retry_email_title': 'Підтвердження відправлення',
    'modal.retry_email_msg': 'Ви дійсно хочете повторно надіслати вибрані листи?',

    'filter.visibility_all': 'Видимість: Всі',
    'filter.visibility_yes': 'Видимість: Так',
    'filter.visibility_no': 'Видимість: Ні',
    'filter.only_mine': 'Тільки мої',

    'option.choose': '-- Вибрати --',
    'option.select_location': '-- Виберіть локацію --',
    'option.select_wp': '-- Виберіть робоче місце --',
    'option.select_tech': '-- Виберіть технологію --',
    'option.select_wp_first': '-- Спочатку виберіть робоче місце --',
    'option.internal_solution': '-- Внутрішнє рішення --',
    'option.unassigned': '-- Непризначено --',

    'tooltip.print_day': 'Друк денного плану',

    'settings.title': 'Налаштування адміністратора',
    'settings.online_translation': 'Онлайн-переклад',
    'settings.online_translation_desc': 'Автоматичний переклад вводу користувача за допомогою зовнішнього сервісу.',
    'settings.mock_mode_warning': 'Ви працюєте в режимі Mock/Demo. Зміни не зберігаються на сервері. Увійдіть через реальний обліковий запис для використання в продакшн.',

    'pdf.title_worklist': 'FHB Maintain - Робочий лист',
    'pdf.title_tasklist': 'Список завдань',
    'pdf.col_tech': 'Технологія',
    'pdf.col_solver': 'Виконавець',
    'pdf.col_deadline': 'Термін',
    'pdf.col_prio': 'Пріоритет',
    'pdf.col_time': 'Час',
    'pdf.col_cost': 'Вартість',
    'pdf.col_solution': 'Рішення',
    'pdf.ext_suppliers': 'ЗОВНІШНІ ПОСТАЧАЛЬНИКИ',
    'pdf.summary': 'Підсумок',
    'pdf.count': 'Кількість',
    'pdf.total_time': 'Загальний час',
    'pdf.total_cost': 'Загальна вартість',
    'pdf.internal_reqs': 'Внутрішні запити',
    'pdf.ext_suppliers_row': 'Зовнішні постачальники',
    'pdf.total': 'ВСЬОГО',
  }
};

const getSavedLang = (): Lang => {
    try {
        const saved = localStorage.getItem('app_lang');
        return (saved === 'cs' || saved === 'en' || saved === 'uk') ? saved : 'cs';
    } catch {
        return 'cs';
    }
};

export const useI18n = create<I18nStore>((set, get) => ({
  lang: getSavedLang(),
  setLang: (lang) => {
      localStorage.setItem('app_lang', lang);
      set({ lang });
  },
  t: (key) => {
    const lang = get().lang;
    return translations[lang][key] || key;
  }
}));
